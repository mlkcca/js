{"version":3,"sources":["core/remote.js"],"names":["ajax","require","host","port","secure","headers","path","params","_qs","_headers","qs","Object","assign","Promise","resolve","reject","request","JSON","stringify","err","data","content","cb","keys","forEach","k"],"mappings":"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","file":"remote.js","sourcesContent":["var ajax = require('./ajax');\n\nexport default class {\n    constructor(host, port, secure, headers){\n    \tthis.host = host;\n    \tthis.port = port,\n    \tthis.secure = secure;\n    \tthis.headers = headers;\n    }\n\n\tpost(path, params, _qs, _headers) {\n\t\tlet qs = _qs || null;\n\t\tlet headers = Object.assign({}, this.headers, _headers);\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tajax.request('POST', this.secure, this.host, this.port, path, qs, JSON.stringify(params), headers, function(err, data) {\n\t\t\t\tif(err) {\n\t\t\t\t\treturn reject(err);\n\t\t\t\t}\n\t\t\t\tif(data.err) {\n\t\t\t\t\treturn reject(data.err);\n\t\t\t\t}\n\t\t\t\tresolve(data.content);\n\t\t\t});\n\t\t});\n\t}\n\n\tget(path, params) {\n\t\t/*\n\t\tvar qs = {};\n\t\tObject.keys(params).forEach(function(k) {\n\t\t\tqs[k] = JSON.stringify(params[k]);\n\t\t})\n\t\t*/\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tajax.request('GET', this.secure, this.host, this.port, path, params, null, this.headers, function(err, data) {\n\t\t\t\tif(err) {\n\t\t\t\t\treturn reject(err);\n\t\t\t\t}\n\t\t\t\t/*\n\t\t\t\tif(data.err) {\n\t\t\t\t\treturn reject(data.err);\n\t\t\t\t}\n\t\t\t\t*/\n\t\t\t\tresolve(data);\n\t\t\t});\n\t\t});\n\t}\n\n\tget2(path, params, cb) {\n\t\treturn ajax.request('GET', this.secure, this.host, this.port, path, params, null, this.headers, function(err, data) {\n\t\t\tif(err) {\n\t\t\t\treturn cb(err);\n\t\t\t}\n\t\t\tcb(null, data);\n\t\t});\n\t}\n\t\n\tput(path, params) {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tajax.request('PUT', this.secure, this.host, this.port, path, null, JSON.stringify(params), this.headers, function(err, data) {\n\t\t\t\tif(err) {\n\t\t\t\t\treturn reject(err);\n\t\t\t\t}\n\t\t\t\tif(data.err) {\n\t\t\t\t\treturn reject(data.err);\n\t\t\t\t}\n\t\t\t\tresolve(data.content);\n\t\t\t});\n\t\t});\n\t}\n\n\tdelete(path, params) {\n\t\tvar qs = {};\n\t\tObject.keys(params).forEach(function(k) {\n\t\t\tqs[k] = JSON.stringify(params[k]);\n\t\t})\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tajax.request('DELETE', this.secure, this.host, this.port, path, qs, null, this.headers, function(err, data) {\n\t\t\t\tif(err) {\n\t\t\t\t\treturn reject(err);\n\t\t\t\t}\n\t\t\t\tif(data.err) {\n\t\t\t\t\treturn reject(data.err);\n\t\t\t\t}\n\t\t\t\tresolve(data.content);\n\t\t\t});\n\t\t});\n\t}\n\n}"]}