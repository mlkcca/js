{"version":3,"sources":["core/datatypes/send.js"],"names":["message","type","json","text","binary","timestamp","t","Math","floor","value","JSON","parse","v","e"],"mappings":";;;;;;;;;;;;;;;;;2BACiBA,O,EAASC,I,EAAM;AAC5B,UAAIA,SAAS,MAAb,EAAqB,OAAO,KAAKC,IAAL,CAAUF,OAAV,CAAP,CAArB,KACK,IAAIC,SAAS,MAAb,EAAqB,OAAO,KAAKE,IAAL,CAAUH,OAAV,CAAP,CAArB,KACA,IAAIC,SAAS,QAAb,EAAuB,OAAO,KAAKG,MAAL,CAAYJ,OAAZ,CAAP,CAAvB,KACA,OAAO,KAAKG,IAAL,CAAUH,OAAV,CAAP;AACN;;;yBAEYA,O,EAAS;AACpB,UAAI,CAACA,OAAL,EAAc,OAAO,IAAP;AACd,UAAIK,YAAY,IAAhB;AACA,UAAIL,QAAQM,CAAZ,EAAe;AACbD,oBAAYE,KAAKC,KAAL,CAAWR,QAAQM,CAAnB,CAAZ;AACD;AACD,UAAIG,QAAQ,IAAZ;AACA,UAAI;AACFA,gBAAQC,KAAKC,KAAL,CAAWX,QAAQY,CAAnB,CAAR;AACD,OAFD,CAEE,OAAOC,CAAP,EAAU;AAEVJ,gBAAQ,cAAR;AACD;AACD,aAAO;AACLA,eAAOA,KADF;AAELJ,mBAAWA;AAFN,OAAP;AAID;;;yBAEYL,O,EAAS;AACpB,aAAOA,OAAP;AACD;;;2BAEcA,O,EAAS;AAEtB,aAAOA,OAAP;AACD","file":"send.js","sourcesContent":["export default class {\n  static decode (message, type) {\n    if (type === 'json') return this.json(message)\n    else if (type === 'text') return this.text(message)\n    else if (type === 'binary') return this.binary(message)\n    else return this.text(message)\n  }\n\n  static json (message) {\n    if (!message) return null\n    let timestamp = null\n    if (message.t) {\n      timestamp = Math.floor(message.t)\n    }\n    let value = null\n    try {\n      value = JSON.parse(message.v)\n    } catch (e) {\n      // JSON parse error\n      value = 'invalid json'\n    }\n    return {\n      value: value,\n      timestamp: timestamp\n    }\n  }\n\n  static text (message) {\n    return message\n  }\n\n  static binary (message) {\n    // TODO\n    return message\n  }\n}\n"]}