{"version":3,"sources":["core/ws.js"],"names":["isBrowser","process","title","EventEmitter","require","Module","host","options","client","onerror","fire","onclose","onopen","onmessage","msg","emit","data","on","send","e","params","code","reason","close","removeAllListeners"],"mappings":";;;;;;;;;;;;;;AAAA,IAAIA,YAAa,cAAcC,QAAQC,KAAvC;;AAEA,IAAIC,eAAeC,QAAQ,QAAR,EAAkBD,YAArC;;;;;AAGC,iBAAYE,MAAZ,EAAoBC,IAApB,EAA0BC,OAA1B,EAAmC;AAAA;;AAAA;;AAElC,MAAGP,SAAH,EAAc;AACb,SAAKQ,MAAL,GAAc,IAAIH,MAAJ,CAAWC,IAAX,CAAd;AACA,SAAKE,MAAL,CAAYC,OAAZ,GAAsB,MAAKC,IAAL,CAAU,OAAV,CAAtB;AACA,SAAKF,MAAL,CAAYG,OAAZ,GAAsB,MAAKD,IAAL,CAAU,OAAV,CAAtB;AACA,SAAKF,MAAL,CAAYI,MAAZ,GAAqB,MAAKF,IAAL,CAAU,MAAV,CAArB;AACA,SAAKF,MAAL,CAAYK,SAAZ,GAAwB,UAACC,GAAD,EAAS;AAChC,UAAKC,IAAL,CAAU,SAAV,EAAqBD,IAAIE,IAAzB;AACA,IAFD;AAGA,GARD,MAQK;AACJ,SAAKR,MAAL,GAAc,IAAIH,MAAJ,CAAWC,IAAX,EAAiBC,OAAjB,CAAd;AACA,SAAKC,MAAL,CAAYS,EAAZ,CAAe,OAAf,EAAwB,MAAKP,IAAL,CAAU,OAAV,CAAxB;AACA,SAAKF,MAAL,CAAYS,EAAZ,CAAe,OAAf,EAAwB,MAAKP,IAAL,CAAU,OAAV,CAAxB;AACA,SAAKF,MAAL,CAAYS,EAAZ,CAAe,MAAf,EAAuB,MAAKP,IAAL,CAAU,MAAV,CAAvB;AACA,SAAKF,MAAL,CAAYS,EAAZ,CAAe,SAAf,EAA0B,MAAKP,IAAL,CAAU,SAAV,CAA1B;AACA;AAhBiC;AAiBlC;;;;uBAEII,G,EAAK;AACT,QAAKN,MAAL,CAAYU,IAAZ,CAAiBJ,GAAjB;AACA;;;uBAEIK,C,EAAG;AAAA;;AACP,UAAO,UAACC,MAAD,EAAY;AAClB,WAAKL,IAAL,CAAUI,CAAV,EAAaC,MAAb;AACA,IAFD;AAGA;;;wBAEKC,I,EAAMC,M,EAAQ;AACnB,QAAKd,MAAL,CAAYe,KAAZ,CAAkBF,IAAlB,EAAwBC,MAAxB;AACA;;;0BAEO;AACP,QAAKE,kBAAL,CAAwB,OAAxB;AACA,QAAKA,kBAAL,CAAwB,OAAxB;AACA,QAAKA,kBAAL,CAAwB,MAAxB;AACA,QAAKA,kBAAL,CAAwB,SAAxB;AACA;;;;EAvC2BrB,Y","file":"ws.js","sourcesContent":["let isBrowser = ('browser' === process.title);\n\nlet EventEmitter = require(\"events\").EventEmitter;\n\nexport default class extends EventEmitter {\n\tconstructor(Module, host, options) {\n\t\tsuper();\n\t\tif(isBrowser) {\n\t\t\tthis.client = new Module(host);\n\t\t\tthis.client.onerror = this.fire('error');\n\t\t\tthis.client.onclose = this.fire('close');\n\t\t\tthis.client.onopen = this.fire('open');\n\t\t\tthis.client.onmessage = (msg) => {\n\t\t\t\tthis.emit('message', msg.data);\n\t\t\t}\n\t\t}else{\n\t\t\tthis.client = new Module(host, options);\n\t\t\tthis.client.on('error', this.fire('error'));\n\t\t\tthis.client.on('close', this.fire('close'));\n\t\t\tthis.client.on('open', this.fire('open'));\n\t\t\tthis.client.on('message', this.fire('message'));\n\t\t}\n\t}\n\n\tsend(msg) {\n\t\tthis.client.send(msg);\n\t}\n\n\tfire(e) {\n\t\treturn (params) => {\n\t\t\tthis.emit(e, params)\n\t\t}\n\t}\n\n\tclose(code, reason) {\n\t\tthis.client.close(code, reason);\n\t}\n\n\tclean() {\n\t\tthis.removeAllListeners('error');\n\t\tthis.removeAllListeners('close');\n\t\tthis.removeAllListeners('open');\n\t\tthis.removeAllListeners('message');\n\t}\n}\n\n"]}